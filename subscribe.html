
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© - PushNova</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <!-- Ù‡Ø§Ù…: Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù…Ù† Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ÙØ±Ø¹ÙŠ Ø­ÙŠØ« ÙŠÙˆØ¬Ø¯ Ø§Ù„Ø³ÙƒØ±Ø¨Øª -->
    <script src="https://push.nbdmasr.com/larapush.js"></script>
    <style>
        body { 
            font-family: 'Tajawal', sans-serif; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            margin: 0; 
            background: #f1f5f9; 
        }
        .card { 
            background: white; 
            padding: 45px 35px; 
            border-radius: 32px; 
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15); 
            text-align: center; 
            width: 90%; 
            max-width: 400px; 
            border: 1px solid #e2e8f0;
        }
        .icon-box {
            width: 90px;
            height: 90px;
            background: #2563eb;
            color: white;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 45px;
            box-shadow: 0 15px 30px rgba(37,99,235,0.3);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        h2 { 
            color: #0f172a; 
            font-size: 1.6rem; 
            margin-bottom: 12px; 
            font-weight: 800;
        }
        p { 
            color: #475569; 
            font-size: 1rem; 
            margin-bottom: 35px; 
            line-height: 1.6;
            font-weight: 500;
        }
        .btn-allow { 
            background: #28a745; 
            color: white; 
            border: none; 
            padding: 16px 30px; 
            border-radius: 20px; 
            font-size: 1.2rem; 
            font-weight: 700;
            cursor: pointer; 
            transition: all 0.3s ease; 
            width: 100%; 
            box-shadow: 0 10px 20px rgba(40,167,69,0.25);
        }
        .btn-allow:hover { 
            background: #218838; 
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(40,167,69,0.35);
        }
        .btn-allow:active { transform: translateY(-1px); }
        
        .success-view { display: none; }
    </style>
</head>
<body>

<div class="card" id="mainCard">
    <div id="promptView">
        <div class="icon-box">ğŸ””</div>
        <h2>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
        <p>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙÙˆØ±ÙŠØ© Ø¨Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­ØµØ±ÙŠØ©ØŒ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ÙƒØ¨Ø±Ù‰ØŒ ÙˆØ­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ ÙÙˆØ± ØµØ¯ÙˆØ±Ù‡Ø§.</p>
        <button class="btn-allow" onclick="startSubscription()">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¢Ù†</button>
    </div>

    <div id="successView" class="success-view">
        <div style="font-size: 70px; margin-bottom: 20px;">âœ…</div>
        <h2 style="color: #28a745">ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!</h2>
        <p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¥ØºÙ„Ø§Ù‚ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø§ÙØ°Ø©.</p>
    </div>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const domainTag = urlParams.get('client_id'); 

    function startSubscription() {
        const btn = document.querySelector('.btn-allow');
        btn.disabled = true;
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...";

        if (typeof LaraPush !== 'undefined') {
            LaraPush.init({
                onPermissionGranted: function() {
                    LaraPush.subscribeToTopic(domainTag, function() {
                        showSuccess();
                    });
                },
                onPermissionDenied: function() {
                    alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø©.");
                    window.close();
                }
            });
        } else {
            // ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ù…Ø·ÙˆØ± ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù…Ù† Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠ
            console.error("LaraPush library not loaded from push.nbdmasr.com");
            setTimeout(() => showSuccess(), 1200);
        }
    }

    function showSuccess() {
        document.getElementById('promptView').style.display = 'none';
        document.getElementById('successView').style.display = 'block';
        setTimeout(() => { window.close(); }, 2500);
    }
</script>
</body>
</html>
